# 空き教室可視化・予約支援システム"ROOMIE" 
（1年次履修科目「SD PBL2」グループ制作）

## 概要
- **課題**：学生が次の時間に教室が使われるか事前に分からず、移動の手間が発生していた  
- **解決**：曜日×時限から空き教室を一覧化し、詳細確認・混雑度把握・予約管理まで可能にした  
- **成果**：SD PBL2 におけるグループ制作物として実装・発表

---

## 開発理由
<p align="center">
<img width="600" src="https://github.com/user-attachments/assets/b8cdb34a-87d5-41e8-95c6-182aca2ecd96" />
</p>

きっかけは、友人と集まって課題に取り組もうとしたことでした。  
授業に使われていない教室を利用することはよくありますが、**次の時間にその教室が授業で使用されるかどうかを、学生が事前に知る手段がありません**。  
そのため、授業が始まりそうな雰囲気を察して途中で退出する必要があり、手間に感じていました。

最初に考えたのは「学生自身が教室予約を行える仕組み」でした。しかし、大学には既に公式の教室予約システムが存在しており、**一学生がこれに直接干渉することは現実的ではありません**。

そこで、
- 既存の教室予約情報を前提とし  
- 「どの教室が空いているか」を学生側から把握でき  
- 利用状況を確認・管理できる  

**空き教室可視化・予約支援サイト**を作成することを目標に、本システムの開発を行いました。

---

## 開発環境と作成過程

### 作成計画
ChatGPT を用いて開発を進めました。  
最初から細かい仕様を与えると、意図と異なるコードが出力されることが分かったため、

1. まず大枠の構成のみを指示  
2. 出力されたコードを確認  
3. 既存コードを前提に、少しずつ要件を追加  

という形で段階的に実装を進めました。

---

## 使用言語とシステム概要

### 使用言語
**内部処理：C言語 / 出力：HTML**

大学の授業で C 言語を学習していたため、**コードの理解と修正が自分で行えること**を重視し、主要なロジックを C 言語で実装しました。

教室情報は構造体として管理し、
- 教室名  
- 設備情報  
- 時間割データ  
- 混雑度  

などを一元的に扱う設計としています。  
表示部分は HTML とし、C 側で生成したデータを画面に出力する形を取りました。また、C言語は高速演算が可能なのでサイト内のデータへのアクセスや内容更新の反映速度が早くなることを期待しました。

---

## サイトでできること

### 空き教室一覧表示
<p align="center">
<img width="600" src="https://github.com/user-attachments/assets/d93db0e5-9a2a-4764-bb1d-7a58ecbbabba" />
</p>

曜日と時限を選択すると、その時間帯に空いている教室を一覧で表示します。  
レギュラー授業を想定しているため、**不規則な教室使用（イベント・補講等）は対象外**としています。

---

### 教室詳細表示
<p align="center">
<img width="600" src="https://github.com/user-attachments/assets/cf18f664-d577-4ce4-be2b-dc9efc282587" />
</p>

各教室をクリックすると、構造体で管理された詳細情報が表示されます。

- 設備情報は情報過多を避けるため、折りたたみ式に実装  
- 混雑度は数値のみだと視認性が低いため、色分け表示を採用  

**「シンプルで見やすく、必要な情報は直感的に把握できる」UI**を目標に、デザイン面には特に時間をかけました。

---

### 予約管理・マイページ
<p align="center">
<img width="600" src="https://github.com/user-attachments/assets/b635d8fb-dd74-4d91-b3ee-87463b62b3f9" />
</p>

予約のキャンセルや変更が可能です。  
マイページを作成することで、自分が現在どの教室を予約しているかを一覧で確認できます。

（画像では、同一ユーザーが 1人 / 5人 / 30人分の予約を行っている想定です。）

---

## 仕様・前提条件
- 対象：曜日 × 時限で管理されるレギュラー授業  
- 非対象：臨時利用、休講、補講、イベント等  
- データ管理：構造体による固定データ管理  
- 同時予約や競合制御：簡易的な実装（厳密な排他制御は未対応）

---

## 課題点と反省

- 不規則な教室使用（休講・補講・イベント等）への未対応  
- 教室データの更新が手動であり、運用負荷が高い点  

C 言語の作成によって結果的に手続き的な実装となりました。  
2 年次にオブジェクト指向を学んだ現在の視点で振り返ると、**機能追加や仕様変更時の拡張性に課題があった**と感じました。

開発時に新しい機能や条件を追加しようとすると、  
1 つの仕様変更に対して **4〜5 のコードに反映させる必要がある場面が多く**、かなり苦労しました。

この点は、処理とデータ構造が密結合していた設計が原因であると考えています。
また、教室利用データを手動で管理しているため、不規則な教室使用（補講・イベント等）を柔軟に反映できず、実運用を想定した場合の信頼性に限界がありました。
今後改善するのであれば、**教室・時間割・予約をクラスとして分離し、それぞれの担当を明確化する**といった設計にすることで、拡張性と保守性が改善できると考えていると思います。

---

## 未実装内容

アイデアとしては上がっていたものの、実装までには至らなかった内容を紹介します。
<p align="center">
<img width="600"  src="https://github.com/user-attachments/assets/99756813-b1e7-4d7c-8732-c2b2086d478d" />
</p>
少ない人数が大きい教室を使用する可能性があり、教室利用者の最大化を図りました。また、ユーザーが欲しい設備が反映される機能も考えました。

<p align="center">
<img width="600" src="https://github.com/user-attachments/assets/03463dbc-b1e5-43e8-8c89-2a9d498a7bfa" />
</p>
そこでユーザーの要望に対してどれだけ教室が合っているのかを点数化して、一番点数が高かった教室を提案するシステムを考えました。
紫色がユーザーが希望する利用者数です。これがそのまま教室の空き席数となります。同じ数なら最大点(20点)を与え、遠のくほど点数は低くなります(赤色)。赤色の関数は

```c
int Lorentz_function(int cls, int numbers) {
  double numerator = 20.0;
  double denominator = 1 + 0.0027*pow((cls - numbers), 2);
  if(cls < numbers) return 0;
  return round(numerator/denominator);
}
```

となります。`double cls`が各教室の空き席数、`double numbers`がユーザーの要望数です。`cls`が`for`文によって値が変わっていき、各教室のデータと`numbers`と比較していきます。

各教室の空き席数が青色となり、交点が点数となります。
※紫色より左は座席が足りないため、0点になるようにします。
<p align="center">
<img width="600" src="https://github.com/user-attachments/assets/70673526-83cb-4984-a34b-83c0c5df3398" />
</p>
他にもユーザーの要望にどれだけ従っているかをOption評価点として加えていきます。曜日と時限がなければ0点、あれば1点にします。
こうすることで、**総合評価点が0点のものは出力しない**とシステムを組むことができると考えたからです。


<div style="display: flex; gap: 10px; align-items: flex-end;">
  <img src="https://github.com/user-attachments/assets/5ab9652f-c960-4484-8bed-c97913e909a1"
       style="height: 300px;">
  <img src="https://github.com/user-attachments/assets/1646e1ed-b3e3-45fe-9bb9-26232ffd2988"
       style="height: 300px;">
</div>
こちらは班員から出たアイデアです。

- 通知機能を端末にどう反映させれば良いのかが不明でした。
- 使用した感想とユーザーを紐づける必要があり、構造体の拡張が強いれる。

開発機関の1ヶ月の内取り掛かれる残り時間では厳しかったため、未実装となりました。
## 備考
本リポジトリは **SD PBL2 のグループ制作物**として作成されたものであり、  
実際の大学の教室予約システムとは連携していません。
